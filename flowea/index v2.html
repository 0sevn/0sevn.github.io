<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>FloWea</title>
<style>
body {
    font-family: "Lato", sans-serif;
    background-color: rgb(117, 117, 117);
    text-align: left;
    text-decoration: none;
    position: relative;
    font-weight: bold;
}

/*
https://www.w3schools.com/css/css3_shadows_box.asp
*/
.mid {
    margin:100px auto 100px auto;
    color: #f2f2f2;
    width: 55%;
    border-radius: 25px 5px;
    background-color: #333;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.5);
    padding:10px 0px 10px 20px;
    z-index: -99;
}
/*
https://www.w3schools.com/css/css_dropdowns.asp
https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_navbar_border
*/
.topnav {
    height:40px;
    width: 55%;
    border-radius: 25px 5px;
    background-color: #333;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.5);
    margin:100px auto 100px auto;
    padding:10px 0px 0px 20px;
}

/*
https://www.w3schools.com/howto/howto_css_dropup.asp
*/
.bottomnav {
    height:40px;
    width: 50%;
    border-radius: 5px 25px;;
    background-color: #333;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.5);
    margin:auto;
    padding:10px 0px 0px 20px;
}

.dropbtn {
    background-color: #252827;
    width: 100px;   
    text-transform: uppercase;
    padding: 8px 0 8px 0;
    color: white;
    border: 5px;
    border-color: coral;
    border-radius: 5px 5px 0 0;
    margin-left:15px;
}
a {
    color: white;
    border-radius: 15px;
    font-size: 14px;
}
.dropdown {
    display: inline-block;
    color: #f2f2f2;
    white-space: nowrap;  
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    border-radius: 5px 5px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
    padding: 2px; 
}
.dropdown-content a {
    color: black;
    padding: 8px 26px;
    display: block;
}

.dropup-content {
    display: none;
    position: absolute;
    bottom: 40px;
    background-color: #f1f1f1;
    border-radius: 5px 5px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
    padding: 2px; 
}

.dropup-content a {
    color: black;
    padding: 8px 26px;
    display: block;
}

.dropdown-content a:hover {
    background-color: coral;
}

.dropup-content a:hover {
    background-color: coral;
}

.dropdown:hover .dropdown-content {display: block;}
.dropdown:hover .dropup-content {display: block;}

.dropdown:hover .dropbtn {background-color: #3e6a8e;}
/* Responsive navigation menu (for mobile devices) */
@media screen and (max-width: 600px) {
  .topnav a {
    float: none;
    display: block;
  }
}

.time {
    font-size: 10px;
    color:darkkhaki;
    display: inline-block;
}
/*https://www.w3schools.com/css/css_align.asp

*/
.fovea {
    font-family: "Trebuchet MS", Helvetica, sans-serif;
    font-size: 15px;
    font-weight: normal;
    line-height: 1.5em;
    width: 240px;

    padding:10px;
    color:rgb(206, 205, 198);
    display: inline-block;
}
.circle {
  background-color:rgba(226, 90, 90, 0.687);
  width: var(--circle-size, 20px);
  height: var(--circle-size, 20px); 
  border-radius: 50%;
  position:fixed;
  display:inline-block;
 
  margin-top:5px;
  transition: 0.5s width, 0.5s height;
}


[type=number] {
  display: block;
}

/* Tooltip container 
https://www.w3schools.com/css/css_tooltip.asp 
*/
.tooltip {
  position: relative;
  display: inline-block;
  /*border-bottom: 1px dotted black;  If you want dots under the hoverable text */
}

/* Tooltip text */
.tooltip .tooltiptext {
  visibility: hidden;
  width: 220px;
  background-color: rgb(79, 79, 79);
  color: #fff;
  text-align: center;
  padding: 5px;
  border-radius: 6px;
  font-weight: normal;
  font-size:12px;

  /* Position the tooltip text - see examples below! */
  position: absolute;
  z-index: 1;
  bottom: 80%;
  left: 0%;
  margin-left: -60px;
}
.tooltip .tooltiptext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-top: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent transparent rgb(79, 79, 79);;
}
/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}
/*
https://www.w3docs.com/snippets/css/how-to-style-input-and-submit-buttons.html
*/
input[type=submit] {
        background-color: #62529c;
        border: none;
        color: #fff;
        padding: 5px 8px;
        text-decoration: none;
        margin: 4px 2px;
        cursor: pointer;
      }
</style>
</head>
<body>
<!-- Top navigation -->

<!-- Mid navigation -->
<div class="mid">
    <div class="circle" title="FOvea, a small depression within the retina where visual acuity is the highest.">
    </div>  
    <div class="tooltip">
        <h1>Flowea </h1>
        <span class="tooltiptext">Fovea, small region of the retina which produces the sharpest vision.</span>

      </div><br>
        
      <input type="text" id="enter_task" placeholder="Enter Task">
      <input type="submit" id="add" value="Add Task" class="circle-size">
      <p>
          <ul id="todo_list" style="list-style: none;">
          </ul>
      </p>    
</div>

<!-- Bottom navigation -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
    

/*todo list script at bottom
write list to any file node.js 
https://stackoverflow.com/questions/52986777/how-to-create-html-file-with-javascript

read list from file to html ajax, jquery
https://stackoverflow.com/questions/40817894/text-to-html-list

The dollar function, $(), can be used as shorthand for the getElementById function
${} multiline string /string interpolation
*/
$(function() {
    var counter = 0;

    function enterTask() {
        
        var text = $('#enter_task').val();
        var time = new Date().toLocaleString();

        var newListItem = $('<li><span><input type="checkbox"> ' + text + ' <p class="time">' + time + '</p>' + ' </span><input type="submit" class="edit" value="Edit"><input type="submit" class="delete" value="Delete"></li>');
        
        var todoList = JSON.parse(localStorage.getItem('todoList') || '[]');
        todoList.push({ text: text, timestamp: time });
        localStorage.setItem('todoList', JSON.stringify(todoList));

        $('#todo_list').append(newListItem);

        counter++;
        console.log('Counter after adding task:', counter); // Log the counter value
        updateCircleSize();
    }

    function deleteTask() {
        var listItem = $(this).closest('li');
        var index = $('#todo_list li').index(listItem);
        listItem.remove();
        counter--;
        console.log('Counter after deleting task:', counter); // Log the counter value
        updateCircleSize();

        // Remove the task from local storage
        var todoList = JSON.parse(localStorage.getItem('todoList') || '[]');
        todoList.splice(index, 1); // Remove the task at the corresponding index
        localStorage.setItem('todoList', JSON.stringify(todoList));
    }

    function updateCircleSize() {
        var circleSize = counter * 20 + 1+'px';
        $('.circle').css('--circle-size', circleSize);
        console.log('circle size:', circleSize); // Log the counter value
    }

    $('#add').on('click', enterTask);

    $('#todo_list').on('click', '.edit', function() {
        var taskText = $(this).siblings('span').find('.task-text');
        taskText.attr('contenteditable', 'true').focus();

        // Update local storage when the task content changes
        taskText.on('input', function() {
            var index = $(this).closest('li').index();
            var todoList = JSON.parse(localStorage.getItem('todoList') || '[]');
            todoList[index].text = $(this).text();
            localStorage.setItem('todoList', JSON.stringify(todoList));
        });
    });

    // Event delegation for delete button
    $('#todo_list').on('click', '.delete', deleteTask);

    // Load tasks from local storage on page load
    var todoList = JSON.parse(localStorage.getItem('todoList') || '[]');
    counter = todoList.length;
    todoList.forEach(item => {
        var newListItem = $('<li><span><input type="checkbox"> <span class="task-text">' + item.text + '</span> <p class="time">' + item.timestamp + '</p></span><input type="submit" class="edit" value="Edit"><input type="submit" class="delete" value="Delete"></li>');
        $('#todo_list').append(newListItem);
    });

    updateCircleSize();
});


</script>
</body>
</html>
